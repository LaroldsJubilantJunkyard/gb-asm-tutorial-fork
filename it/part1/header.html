<!DOCTYPE HTML>
<html lang="it" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>L&#x27;header - GB ASM Tutorial</title>

        <!-- Custom HTML head -->
        <meta name="twitter:card" content="summary_large_image"/>
        <meta name="twitter:site:id" content="@gbdev0"/>
        <meta property="og:title" content="L&#x27;header - GB ASM Tutorial" />
        <meta property="og:image" content="https://gbdev.io/gb-asm-tutorial/assets/banner/1200x628.png" />
        <meta property="og:site_name" content="GB ASM Tutorial"/>
        
        <!-- Matomo tracking -->
        <script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(['trackPageView']);
          _paq.push(['enableLinkTracking']);
          (function() {
            var u="//stats.gbdev.io/";
            _paq.push(['setTrackerUrl', u+'matomo.php']);
            _paq.push(['setSiteId', '1']);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
            g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
          })();
        </script>
        <!-- End Matomo Code -->

        <meta name="description" content="A complete guide to programming Game Boy games in assembly.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../css/custom.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../index.html">Home</a></li><li class="chapter-item affix "><a href="../roadmap.html">Tabella di marcia</a></li><li class="chapter-item affix "><a href="../help-feedback.html">Aiuto</a></li><li class="chapter-item affix "><li class="part-title">Parte ‚Ö† - Hello World!</li><li class="chapter-item "><a href="../part1/setup.html"><strong aria-hidden="true">1.</strong> Configurazione</a></li><li class="chapter-item "><a href="../part1/hello_world.html"><strong aria-hidden="true">2.</strong> Hello World!</a></li><li class="chapter-item "><a href="../part1/toolchain.html"><strong aria-hidden="true">3.</strong> Strumenti di lavoro</a></li><li class="chapter-item "><a href="../part1/bin_and_hex.html"><strong aria-hidden="true">4.</strong> Binario ed esadecimale</a></li><li class="chapter-item "><a href="../part1/registers.html"><strong aria-hidden="true">5.</strong> Registri</a></li><li class="chapter-item "><a href="../part1/assembly.html"><strong aria-hidden="true">6.</strong> Basi di Assembly</a></li><li class="chapter-item "><a href="../part1/memory.html"><strong aria-hidden="true">7.</strong> Memoria</a></li><li class="chapter-item expanded "><a href="../part1/header.html" class="active"><strong aria-hidden="true">8.</strong> L'header</a></li><li class="chapter-item "><a href="../part1/operations.html"><strong aria-hidden="true">9.</strong> Operazioni e flags</a></li><li class="chapter-item "><a href="../part1/jumps.html"><strong aria-hidden="true">10.</strong> Salti</a></li><li class="chapter-item "><a href="../part1/tracing.html"><strong aria-hidden="true">11.</strong> Tracciamento</a></li><li class="chapter-item "><div><strong aria-hidden="true">12.</strong> Grafica</div><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../part1/tiles.html"><strong aria-hidden="true">12.1.</strong> Tiles</a></li><li class="chapter-item "><a href="../part1/palettes.html"><strong aria-hidden="true">12.2.</strong> Palette</a></li><li class="chapter-item "><a href="../part1/tilemap.html"><strong aria-hidden="true">12.3.</strong> Tilemap</a></li></ol></li><li class="chapter-item "><a href="../part1/wrapup.html"><strong aria-hidden="true">13.</strong> In conclusione</a></li><li class="chapter-item affix "><li class="part-title">Parte ‚Ö° - Il nostro primo gioco</li><li class="chapter-item "><a href="../part2/getting-started.html"><strong aria-hidden="true">14.</strong> Per iniziare</a></li><li class="chapter-item "><a href="../part2/objects.html"><strong aria-hidden="true">15.</strong> Oggetti</a></li><li class="chapter-item "><a href="../part2/functions.html"><strong aria-hidden="true">16.</strong> Funzioni</a></li><li class="chapter-item "><a href="../part2/input.html"><strong aria-hidden="true">17.</strong> Input</a></li><li class="chapter-item "><a href="../part2/collision.html"><strong aria-hidden="true">18.</strong> Collisioni</a></li><li class="chapter-item "><a href="../part2/bricks.html"><strong aria-hidden="true">19.</strong> Mattoncini</a></li><li class="chapter-item "><a href="../part2/wip.html"><strong aria-hidden="true">20.</strong> Lavori in corso</a></li><li class="chapter-item affix "><li class="part-title">Parte III ‚Äî Il nostro secondo gioco</li><li class="chapter-item "><a href="../part3/getting-started.html"><strong aria-hidden="true">21.</strong> Come iniziare</a></li><li class="chapter-item "><a href="../part3/project-structure.html"><strong aria-hidden="true">22.</strong> Struttura del progetto</a></li><li class="chapter-item "><a href="../part3/entry-point.html"><strong aria-hidden="true">23.</strong> Punto di ingresso</a></li><li class="chapter-item "><a href="../part3/changing-game-states.html"><strong aria-hidden="true">24.</strong> Cambiamento dello Stato di Gioco</a></li><li class="chapter-item "><a href="../part3/title-screen.html"><strong aria-hidden="true">25.</strong> Schermata del titolo</a></li><li class="chapter-item "><a href="../part3/story-screen.html"><strong aria-hidden="true">26.</strong> Schermata della storia</a></li><li class="chapter-item "><a href="../part3/gameplay.html"><strong aria-hidden="true">27.</strong> Gameplay</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../part3/scrolling-background.html"><strong aria-hidden="true">27.1.</strong> Sfondo scorrevole</a></li><li class="chapter-item "><a href="../part3/heads-up-interface.html"><strong aria-hidden="true">27.2.</strong> Heads-Up Interface</a></li><li class="chapter-item "><a href="../part3/sprites-metasprites.html"><strong aria-hidden="true">27.3.</strong> Sprites & Metasprites</a></li><li class="chapter-item "><a href="../part3/object-pools.html"><strong aria-hidden="true">27.4.</strong> Object Pools</a></li><li class="chapter-item "><a href="../part3/the-player.html"><strong aria-hidden="true">27.5.</strong> Il giocatore</a></li><li class="chapter-item "><a href="../part3/bullets.html"><strong aria-hidden="true">27.6.</strong> Bullets</a></li><li class="chapter-item "><a href="../part3/enemies.html"><strong aria-hidden="true">27.7.</strong> Nemici</a></li><li class="chapter-item "><a href="../part3/collision.html"><strong aria-hidden="true">27.8.</strong> Rilevamento della collisione (collision detection)</a></li><li class="chapter-item "><a href="../part3/enemy-player-collision.html"><strong aria-hidden="true">27.9.</strong> Collisione nemico-giocatore</a></li><li class="chapter-item "><a href="../part3/enemy-bullet-collision.html"><strong aria-hidden="true">27.10.</strong> Enemy-Bullet Collision</a></li></ol></li><li class="chapter-item "><a href="../part3/conclusion.html"><strong aria-hidden="true">28.</strong> Conclusione</a></li><li class="chapter-item affix "><a href="../next.html">Prossimi passi</a></li><li class="chapter-item affix "><a href="../cheatsheet.html">Cheatsheet</a></li><li class="chapter-item affix "><a href="../resources.html">Risorse</a></li><li class="chapter-item affix "><a href="../thanks.html">Ringraziamenti</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">GB ASM Tutorial</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        <button id="language-toggle" class="icon-button" type="button"
                                title="Change language" aria-label="Change language"
                                aria-haspopup="true" aria-expanded="false"
                                aria-controls="language-list">
                            <i class="fa fa-globe"></i>
                        </button>
                        <ul id="language-list" class="theme-popup" aria-label="Languages" role="menu">
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="en">English</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="it">Italian</a>
                          </button></li>
                        </ul>

                        <script>
                          let langToggle = document.getElementById("language-toggle");
                          let langList = document.getElementById("language-list");
                          langToggle.addEventListener("click", (event) => {
                              langList.style.display = langList.style.display == "block" ? "none" : "block";
                          });
                          let selectedLang = document.getElementById("it");
                          selectedLang.parentNode.classList.add("theme-selected");

                          // The path to the root, taking the current
                          // language into account.
                          let full_path_to_root = "../../";
                          // The page path (mdbook only gives us
                          // access to the path to the Markdown file).
                          let path = "part1/header.md".replace(/\.md$/, ".html");
                          for (let lang of langList.querySelectorAll("a")) {
                              if (lang.id == "en") {
                                  lang.href = `${full_path_to_root}${path}`;
                              } else {
                                  lang.href = `${full_path_to_root}${lang.id}/${path}`;
                              }
                          }
                        </script>

                        
                        <a href="https://github.com/gbdev/gb-asm-tutorial" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/gbdev/gb-asm-tutorial/edit/main/po/it.po"
                           title="Suggest an edit to the translation" aria-label="Suggest an edit to the translation">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="header"><a class="header" href="#header">Header</a></h1>
<p>Torniamo a una certa riga all‚Äôinizio di <code>hello-world.asm</code>.</p>
<pre><code class="language-rgbasm linenos start=7">	ds $150 - @, 0 ; Make room for the header
</code></pre>
<p>Che cos‚Äô√® questo misterioso header, detto anche intestazione? Perch√© dobbiamo allocargli uno spazio specifico? Queste e tante altre domande troveranno una risposta in questa lezione!</p>
<h2 id="cos√®-lheader"><a class="header" href="#cos√®-lheader">Cos‚Äô√® l‚Äôheader?</a></h2>
<p>La prima cosa da fare √® spiegare <em>cosa √®</em> l‚Äôheader.
√à la regione di memoria da $0104 a $014F (inclusa).
Contiene metadati sulla ROM, come il titolo, la compatibilit√† con il Game Boy Color, le dimensioni,
due checksum e, cosa interessante, il logo Nintendo che viene visualizzato durante l‚Äôanimazione di accensione.</p>
<div class="box tip">
<p>Queste e altre informazioni sono disponibili <a href="https://gbdev.io/pandocs/The_Cartridge_Header">nei documenti Pan</a>.</p>
</div>
<p>√à interessante notare che la maggior parte delle informazioni contenute nell‚Äôheader non ha importanza in un hardware reale (la dimensione della ROM √® determinata solo dalla capacit√† del chip ROM nella cartuccia, non dal byte nella intestazione).
Difatti, alcuni prototipi di ROM hanno addirittura informazioni errate nell‚Äôheader!</p>
<p>La maggior parte dell‚Äôheader veniva utilizzata solo dal reparto di produzione di Nintendo per sapere quali componenti inserire nella cartuccia quando si pubblicava una ROM.
Pertanto, solo le ROM inviate a Nintendo dovevano avere una intestazione perfettamente accurata; le ROM utilizzate per i test interni dovevano solo superare i controlli della ROM di avvio, che spiegheremo pi√π avanti.</p>
<p>Tuttavia, nella nostra epoca ‚Äúmoderna‚Äù, l‚Äôheader √® molto importante.
Gli emulatori (compresi gli emulatori hardware, come le flashcard) devono emulare l‚Äôhardware presente nella cartuccia e fanno affidamento su alcuni dei valori presenti nell‚Äôheader, dato che questa sezione √® l‚Äôunica fonte di informazioni sull‚Äôhardware che la cartuccia della ROM dovrebbe contenere.</p>
<h2 id="rom-di-avvio"><a class="header" href="#rom-di-avvio">ROM di avvio</a></h2>
<p>L‚Äôintestazione √® profondamente collegata alla cosiddetta <strong>boot ROM</strong> (ROM di ‚Äúavvio‚Äù).</p>
<p>The most observant and/or nostalgic of you may have noticed the lack of the boot-up animation and the Game Boy‚Äôs signature ‚Äúba-ding!‚Äù in Emulicious.
When the console powers up, the CPU does not begin executing instructions at address $0100 (where our ROM‚Äôs entry point is), but at $0000.</p>
<p>Tuttavia, in quel momento, un piccolo programma chiamato <em>boot ROM</em>, masterizzato all‚Äôinterno del silicio della CPU, viene ‚Äúsovrapposto‚Äù alla nostra ROM!
La ROM di avvio √® responsabile dell‚Äôanimazione di avvio, ma controlla anche l‚Äôintestazione della ROM!
In particolare, verifica che i checksum del logo Nintendo e della intestazione siano corretti; se uno dei due controlli fallisce, la ROM di avvio si <em>blocca</em> intenzionalmente e il nostro gioco non verr√† mai eseguito :(</p>
<div class="box tip"><p class="box-title">For the curious</p>
<p>√à possibile trovare una descrizione pi√π dettagliata di ci√≤ che fa la ROM di avvio <a href="https://gbdev.io/pandocs/Power_Up_Sequence">nei Pan Docs</a>, nonch√© una spiegazione del controllo del logo.
Attenzione, per√≤, perch√© si tratta di un argomento piuttosto avanzato.</p>
<p>If you want to enable the boot ROMs in Emulicious, you must obtain a copy of the boot ROM(s), whose SHA256 checksums can be found <a href="https://github.com/ISSOtm/gb-bootroms/blob/master/sha256sums.txt">in their disassembly</a> for verification.
If you wish, you can also compile <a href="https://github.com/LIJI32/SameBoy#compilation">SameBoy‚Äôs boot ROMs</a> and use those instead, as a free-software substitute.</p>
<p>Then, in Emulicious‚Äô options, go to the <code>Options</code> tab, then <code>Emulation</code>‚Üí<code>Game Boy</code>, and choose which of GB and/or GBC boot roms you want to set.
Finally, set the path(s) to the boot ROM(s) you wish to use, and click <code>Open</code>.
Now, just reset the emulator, and voil√†!</p>
</div>
<p>Un header viene tipicamente definito ‚Äúvalido‚Äù se supera i controlli della ROM di avvio e ‚Äúnon valido‚Äù in caso contrario.</p>
<h2 id="rgbfix"><a class="header" href="#rgbfix">RGBFIX</a></h2>
<p>RGBFIX √® il terzo componente di RGBDS, il cui scopo √® scrivere l‚Äôheader di una ROM.
√à separato da RGBLINK in modo da poter essere usato come strumento indipendente.
Il suo nome deriva dal fatto che RGBLINK di solito non produce una ROM con un header valido, quindi la ROM deve essere ‚Äúaggiustata‚Äù prima di essere pronta per la produzione.</p>
<p>RGBFIX has <a href="https://rgbds.gbdev.io/docs/rgbfix.1">a bunch of options</a> to set various parts of the header; but the only two that we are using here are <code>-v</code>, which produces a <strong>v</strong>alid header (so, correct <a href="https://gbdev.io/pandocs/The_Cartridge_Header.html#0104-0133---nintendo-logo">Nintendo logo</a> and <a href="https://gbdev.io/pandocs/The_Cartridge_Header.html#014d---header-checksum">checksums</a>), and <code>-p¬†0xFF</code>, which <strong>p</strong>ads the ROM to the next valid size (using $FF as the filler byte), and writes the appropriate value to the <a href="https://gbdev.io/pandocs/The_Cartridge_Header.html#0148---rom-size">ROM size byte</a>.</p>
<p>Guardando altri progetti, si possono trovare invocazioni di RGBFIX con pi√π opzioni, ma queste due dovrebbero essere quasi sempre presenti.</p>
<h2 id="allora-qual-√®-il-problema-con-questa-linea"><a class="header" href="#allora-qual-√®-il-problema-con-questa-linea">Allora, qual √® il problema con questa linea?</a></h2>
<p>Si!
Questa linea.</p>
<pre><code class="language-rgbasm linenos start=7">	ds $150 - @, 0 ; Make room for the header
</code></pre>
<p>Vediamo cosa succede se la rimuoviamo (o la commentiamo).</p>
<pre><code><span class="console-line hljs-meta"></span><span class="language-bash">rgbasm -L -o hello-world.o hello-world.asm</span>
<span class="console-line hljs-meta"></span><span class="language-bash">rgblink -o hello-world.gb -n hello-world.sym hello-world.o</span>
</code></pre>
<p>(Sto intenzionalmente NON eseguendo RGBFIX; vedremo perch√© tra poco).</p>
<p><img src="../assets/img/bad_warnings.png" alt="‚ÄúQuesta rom non funzionerebbe su un vero gameboy.‚Äù" /></p>
<p>Come ho spiegato, RGBFIX √® responsabile della scrittura dell‚Äôintestazione, quindi dovremmo usarlo per risolvere questa eccezione.</p>
<pre><code><span class="console-line hljs-meta"></span><span class="language-bash">rgbfix -v -p 0xFF hello-world.gb</span>
warning: Overwrote a non-zero byte in the Nintendo logo
warning: Overwrote a non-zero byte in the header checksum
warning: Overwrote a non-zero byte in the global checksum
</code></pre>
<p><em>Sono sicuro che questi avvisi non sono nulla di cui preoccuparsi‚Ä¶</em>
(A seconda della versione di RGBDS in uso, √® possibile che siano stati visualizzati avvisi diversi, o addirittura nessuno).</p>
<p>Let‚Äôs run the ROM, click on Console on the debugger‚Äôs bottom window, press <kbd><kbd>F5</kbd></kbd> a few times, and‚Ä¶</p>
<figure>
  <img src="../assets/img/invalid_opcode.png" alt="Screenshot of Emulicious' debugger, PC won't advance past $0105">
  <figcaption>
    When the console reads "Executing illegal instruction", you <i>might</i> have screwed up somewhere.
  </figcaption>
</figure>
<p><img src="../assets/img/fine.png" alt="‚ÄúThis is fine‚Äù meme" /></p>
<p>Ok, allora, cos‚Äô√® successo?</p>
<p>Come si pu√≤ vedere dallo screenshot, PC si trova a $0105.
Cosa sta facendo l√¨?</p>
<p>‚Ä¶Oh, <code>EntryPoint</code> √® a $0103.
Quindi il <code>jp</code> a $0100 √® andato l√¨ e ha iniziato a eseguire le istruzioni (<code>3E CE</code> √® la forma grezza di <code>ld a, $CE</code>), ma poi $ED non codifica alcuna istruzione valida, quindi la CPU si blocca.</p>
<p>Ma perch√© <code>EntryPoint</code> √® l√¨?
Come avrete capito dagli avvisi stampati da RGBFIX, esso <em>sovrascrive</em> l‚Äôarea dell‚Äôheader nella ROM.
Tuttavia, RGBLINK <strong>non</strong> √® a conoscenza dell‚Äôheader (perch√© RGBLINK non √® usato solo per generare ROM!), quindi √® necessario riservare esplicitamente spazio per l‚Äôarea dell‚Äôheader.</p>
<div class="box danger decorated"><p>ü•¥</p>
<p>Dimenticare di riservare questo spazio pu√≤ far s√¨ che un pezzo di codice o di dati finisca l√¨ e poi venga sovrascritto. Questo √® un errore comune di chi √® alle prime armi che pu√≤ lasciare perplessi.
Fortunatamente, dalla versione 0.5.1 RGBFIX avverte quando rileva questo errore, come mostrato sopra.</p>
</div>
<p>Cos√¨, preveniamo disastri come questo:</p>
<pre><code class="language-rgbasm linenos start=3">SECTION &quot;Header&quot;, ROM0[$100]

	jp EntryPoint

	ds $150 - @, 0 ; Make room for the header
</code></pre>
<p>La direttiva <code>ds</code> sta per ‚Äúdefine space‚Äù e consente di riempire un intervallo di memoria.
Questa riga specifica riempie tutti i byte da $103 a $14F (inclusi) con il valore $00.
Poich√© parti diverse di codice e/o di dati non possono sovrapporsi, questo assicura che l‚Äôintervallo di memoria dell‚Äôheader possa essere sovrascritto in modo sicuro da RGBFIX e che nessun altro venga accidentalmente sovrascritto.</p>
<p>Potrebbe non essere ovvio come questo <code>ds</code> finisca per riempire quello specifico intervallo di memoria.
Il <code>jp</code> a 3 byte copre gli indirizzi di memoria $100, $101 e $102.<br />
(Iniziamo da $100 perch√© √® dove si trova la <code>SECTION</code> definita manualmente).<br />
Quando RGBASM elabora la direttiva <code>ds</code>, <code>@</code> (che √® un simbolo speciale che valuta ‚Äúl‚Äôindirizzo corrente‚Äù) ha quindi il valore $103, quindi riempie <code>$150 - $103 = $4D</code> byte con zeri, quindi $103, $104, ‚Ä¶, $14E, $14F.</p>
<h2 id="bonus-il-ciclo-infinito"><a class="header" href="#bonus-il-ciclo-infinito">Bonus: il ciclo infinito</a></h2>
<p>(Questo non √® propriamente collegato all‚Äôheader, ma devo spiegarlo da qualche parte e questo √® un posto come un altro)</p>
<p>Ci si potrebbe anche chiedere a cosa serva il ciclo infinito alla fine del codice.</p>
<pre><code class="language-rgbasm">Done:
	jp Done
</code></pre>
<p>Semplicemente, la CPU non smette mai di eseguire istruzioni; quindi, quando il nostro piccolo Hello World √® finito e non c‚Äô√® pi√π nulla da fare, dobbiamo comunque dare alla CPU un po‚Äô di lavoro: quindi, le facciamo fare nulla, per sempre.</p>
<p>Non possiamo lasciare che la CPU se ne vada, perch√© inizierebbe a eseguire altre parti della memoria come codice, con il rischio di bloccarsi.
(Per verificare: rimuovete o commentate queste due righe, compilate nuovamente la <a href="hello_world.html">ROM</a> e vedete cosa succede)</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../part1/memory.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../part1/operations.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../part1/memory.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../part1/operations.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../js/linenos.js"></script>


    </body>
</html>
